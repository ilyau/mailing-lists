README

Компонент для управления рассылками с использованием ExtJS 3.4, PHP, MySQL 5.5.
Рассылка писем происходит в многопоточном режиме с помощью gearmand.

Основные принципы сервиса. Есть кампании, списки подписчиков, подписчики и шаблоны писем. В клиентской части реализованы CRUD-операции. Во вкладке Campaigns можно запустить кампанию. Для этого нужно выделить любую ячейку кампании, которую надо запустить и нажать кнопку Go в top toolbar. После подтверждения статус компании изменится на running.

Отправка писем происходит в фоновом многопоточном режиме с помощью Gearman. Вместо отправки письма, письмо логируется в файл /app/log.txt. Этот файл во время записи блокируется, учитывая параллельность выполняемых задач. На production запись в лог можно дополнить реальной отправкой письма с помощью mail().

Исходный код по адресу: https://github.com/ilyau/mailing-lists

Системные требования:

- PHP 5.3.x
- PHP extension gearman 0.8.3
- MySQL 5.x
- сервер Apache 2
- Gearmand 0.13
- ExtJS 3.4.1

Для запуска:

1. В папку с index.php скопировать разархивировать папку ext.3.4.1/
   Ссылка для скачивания: http://www.sencha.com/products/extjs3/download/

2. Создаем базу из db.sql.
 
3. В /app/config.php указываем настройки для доступа к базе данных.
   Для этого копируем /app/config.php.example в /app/config.php и
   редактируем последний.

4. На сервере запускаем Gearmand командой:

   gearmand -d

5. Запускаем демон worker.php командой:

   php worker.php


Структура приложения:
   /app/ - контроллеры, модели, вспомогательные классы
   /index.php - входной скрипт для браузера
   /ajax.php - принимает запросы от ExtJS, создает необходимые контроллеры и модели
